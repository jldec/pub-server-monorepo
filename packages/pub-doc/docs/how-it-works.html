<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">


<!-- html generated by pub-server from markdown /010 How it works.md -->

<title>How it works</title>
<link rel="stylesheet" href="./css/github-markdown-light.css">
<link rel="stylesheet" href="./css/pub-theme-doc.css">
<link rel="stylesheet" href="./css/prism.css">
<link rel="stylesheet" href="./css/font-awesome.css">
</head>
<body>

<div data-render-layout="main-layout">
<header>
<div id="doctitle"><h1 id="pub-server"><a href="./">pub-server</a></h1>
<p>documentation</p>
</div>
<div id="topmenu"><ul>
<li><a href="https://github.com/jldec/pub-server" title="github"><span class="fa fa-lg fa-fw">&#xf09b;</span></a></li>
</ul>
</div>
</header>

<div id="navicon" onclick=""><p><span class="fa fa-fw fa-lg">&#xf0c9;</span></p>

<nav id="toc">
<ul>
<li><a href="./">Introduction</a></li>
<li><a href="./how-it-works">How it works</a></li>
<li><a href="./installation">Installation</a></li>
<li><a href="./simple-doc-site">Simple doc site</a></li>
<li><a href="./configuration">Configuration</a></li>
<li><a href="./packages-and-themes">Packages and Themes</a></li>
<li><a href="./sources">Sources</a></li>
<li><a href="./outputs">Outputs</a></li>
<li><a href="./static-files">Static Files</a></li>
<li><a href="./browser-scripts">Browser Scripts</a></li>
<li><a href="./generator-plugins">Generator Plugins</a></li>
<li><a href="./server-plugins">Server Plugins</a></li>
<li><a href="./web-server-configuration">Web Server Configuration</a></li>
<li><a href="./the-page-model">The Page Model</a></li>
<li><a href="./links">Links</a></li>
<li><a href="./command-line">Command line</a></li>
<li><a href="./helpers">Helpers</a></li>
<li><a href="./github-pages">GitHub Pages</a></li>
</ul>
</nav>
</div>

<div id="main" onclick="">
<div id="content" class="markdown-body">
<div data-render-page="/how-it-works">
<div data-render-html="/how-it-works"><h1 id="how-it-works">How it works</h1>
<h3 id="tldr">tl;dr</h3>
<p>All text-content lives in <strong>markdown</strong> fragments inside <strong>text</strong> files in one or more <strong>sources</strong>. Fragments in the same file are separated by a delimiter like</p>
<pre><code>---- /page-1 ----
</code></pre>
<p><strong>pub-generator</strong> compiles markdown fragments into javascript objects which are rendered to HTML by applying <strong>handlebars templates</strong>.</p>
<h3 id="sources">sources</h3>
<p>Sources are directories in your project or inside a theme package. Source directories are scanned, and new files picked up automatically when the source is read.</p>
<p>Handlebars templates live in files in sources just like markdown text. In fact, templates and markdown may live together in the same source file as long as each is clearly identified e.g. (simplified content)</p>
<pre><code>---- /page-1 ----

page1 markdown text...

---- /main-layout.hbs ----

&lt;html&gt;{{{renderPage}}}&lt;/html&gt;
</code></pre>
<h3 id="pages-and-fragments">pages and fragments</h3>
<p>There are 2 kinds of markdown content:</p>
<ol>
<li><strong>pages</strong> have a &quot;normal&quot; page url or href. e.g. <code>/pages/about-us</code></li>
<li><strong>fragments</strong> have an href with a fragment #id. e.g. <code>/blog/2014/year-in-review#conclusions</code></li>
</ol>
<p>The href may be specified in a header at the top of the markdown like the examples above or derived from the source path: E.g. a file <code>/md/pages/About Us.md</code> may become <code>/pages/about-us</code> assuming <code>/md</code> is the source.</p>
<p>Filenames are turned into urls by slugifying i.e. lowercasing and converting non-alphanumeric characters into hyphens.</p>
<p>In addition to having an href, all pages and fragments may acquire additional metadata from their markdown headers. E.g to set a title for the home page, add the following at the top of the index.md file.</p>
<pre><code>---- / ----
title: Introduction

**pub-server** is a lightweight content management tool for publishing on the web
</code></pre>
<h3 id="templates-and-rendering">templates and rendering</h3>
<p>pub-server invokes compiled templates to render pages.</p>
<p>Page or fragment objects provide the input &quot;context&quot; for handlebars. E.g. If a template contains <code>{{title}}</code>, handlebars will look for a <code>.title</code> property on the current page or fragment object and insert the value of that property into the html output.</p>
<p>Template evaluation is performed in a nested manner</p>
<ul>
<li>The outer layout template will include a helper like <code>{{{renderPage}}}</code></li>
<li>This invokes an inner page template which may render the page markdown using <code>{{{html}}}</code> or it may iterate over page-fragments using a block helper like <code>{{{#eachFragment}}}...{{{/eachFragment}}}</code></li>
</ul>
<p>Templates may be explicitly specified. E.g. to use an outer template called <code>hero</code> instead of the default &#39;main-layout&#39;, specify <code>layout:hero</code> in the markdown header. Similarly, to use a page layout called <code>flow</code>, specify <code>template:flow</code> in the markdown header.</p>
<h3 id="loading">loading</h3>
<p>Before rendering (or every time a source is modified) the generator does:</p>
<ul>
<li><em>read</em> text files in order from all (or just the modified) sources</li>
<li><em>pre-process</em> each file into one or more fragments</li>
<li><em>compile</em> .md fragments into arrays of javascript objects</li>
<li><em>compile</em> .hbs fragments into handlebars templates</li>
<li><em>emit</em> events which can trigger additional processing by plugins</li>
</ul>
<p>Page-fragments are automatically attached to pages during compilation. This makes it easy for templates to iterate over the fragments in a page during rendering.</p>
</div>

</div><!--page-->
</div>
<div id="credit"><p><span class="fa">&#xf004;</span> powered by <a href="https://jldec.github.io/pub-doc/">pub-server</a> and <a href="https://github.com/jldec/pub-server-monorepo">pub-theme-doc</a></p>
</div>
</div>

</div><!--layout-->

<script>window.pubRef = {"href":"/how-it-works","relPath":"."};</script>
<script src="./js/jquery-1.12.4.min.js" ></script>
<script src="./pub/pub-ux.js" ></script>
<!-- Copyright (c) 2015-2026 JÃ¼rgen Leschner - github.com/jldec - MIT license -->
</body>
</html>
